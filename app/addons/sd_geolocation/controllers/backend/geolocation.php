<?php
 if (!defined('BOOTSTRAP')) { die('Access denied'); } if ($_SERVER['REQUEST_METHOD'] == 'POST') { return array(CONTROLLER_STATUS_OK); } $params = $_REQUEST; if ($mode == 'user_location') { if (defined('AJAX_REQUEST')) { Tygh::$app['view']->assign(array( 'id' => (empty($params['result_ids'])) ? 'sd_geo_user_location' : $params['result_ids'], 'latitude' => (empty($params['latitude'])) ? 0 : $params['latitude'], 'longitude' => (empty($params['longitude'])) ? 0 : $params['longitude'], )); Tygh::$app['view']->display('addons/sd_geolocation/views/geolocation/user_location.tpl'); exit(); } else { return array(CONTROLLER_STATUS_REDIRECT, (isset($params['return_url'])) ? $params['return_url'] : ''); } }