<?php
 use Tygh\Registry; if (!defined('BOOTSTRAP')) { die('Access denied'); } if ($_SERVER['REQUEST_METHOD'] == 'POST') { return array(CONTROLLER_STATUS_OK); } $params = $_REQUEST; if (!defined('AJAX_REQUEST')) { $show_popup = Registry::get('addons.sd_geolocation.show_city_confirm'); $location = sd_ZWUzNjY2ZDgxMDJhMGJlMzAyODc0OGZj(); $show_automatic_popup = 'Y'; if (!empty($location) && $show_popup != 'none' && !empty(Tygh::$app['session']['location_determined']) && Tygh::$app['session']['location_determined'] == 'Y') { $geoip_autopopup_shown = fn_get_session_data('geoip_autopopup_shown'); if (!empty($geoip_autopopup_shown) && $geoip_autopopup_shown == 'Y') { $show_automatic_popup = 'N'; } else { fn_set_session_data('geoip_autopopup_shown', 'Y'); Tygh::$app['view']->assign('location', $location); } } else { $show_automatic_popup = 'N'; } Tygh::$app['view']->assign('geoip_show_automatic_popup', $show_automatic_popup); }