<?php
 if (!defined('BOOTSTRAP')) { die('Access denied'); } if ($_SERVER['REQUEST_METHOD'] == 'POST') { return array(CONTROLLER_STATUS_OK); } $params = $_REQUEST; if ($mode == 'change_location') { if (defined('AJAX_REQUEST') && isset($params['hide_notifications'])) { sd_NmQ4OTI0MzAzMGJkZWRlZmZiNTc3YjQ5($params, false); exit(); } else { sd_NmQ4OTI0MzAzMGJkZWRlZmZiNTc3YjQ5($params); if (!empty($params['location_determined'])) { Tygh::$app['session']['location_determined'] = $params['location_determined']; } return array(CONTROLLER_STATUS_REDIRECT, (isset($params['return_url'])) ? $params['return_url'] : ''); } } elseif ($mode == 'my_location') { if (defined('AJAX_REQUEST')) { Tygh::$app['view']->assign(array( 'id' => (empty($params['id'])) ? 'my_location' : $params['id'], 'location' => sd_ZWUzNjY2ZDgxMDJhMGJlMzAyODc0OGZj() )); Tygh::$app['view']->display('addons/sd_geolocation/views/geolocation/my_location.tpl'); exit(); } else { return array(CONTROLLER_STATUS_REDIRECT, (isset($params['return_url'])) ? $params['return_url'] : fn_url('')); } }