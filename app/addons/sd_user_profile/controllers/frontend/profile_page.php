<?php
 use Tygh\Registry; if (!defined('BOOTSTRAP')) { die('Access denied'); } if ($_SERVER['REQUEST_METHOD'] == 'POST') { return; } if ($mode == 'view') { $params = $_REQUEST; $params['extend'] = array('description'); $params['my_likes'] = true; if (!empty($params['page'])) { $params['_page'] = $params['page']; } else { $params['_page'] = 0; } if (empty($auth['user_id'])) { return array(CONTROLLER_STATUS_REDIRECT, 'auth.login_form?return_url=' . urlencode(Registry::get('config.current_url'))); } $profile_id = $auth['user_id']; $user_data = fn_get_user_info($profile_id); if (empty($user_data)) { return array(CONTROLLER_STATUS_NO_PAGE); } if ($auth['user_id'] != $_REQUEST['profile_id']) { return array(CONTROLLER_STATUS_DENIED); } $user_name = sd_ODI5MmU0ZWNiNzdhNTc2ZWIxZmZiZGI5($user_data); $user_data['age'] = sd_MTExN2M2OGNmNmJmZTQ5YTYwZGY1ZjRm($user_data['birthday']); $user_data['image_circle'] = Registry::get('addons.sd_user_profile.is_image_circle'); fn_add_breadcrumb(__('profile') . ' ' . $user_name); if (function_exists('fn_wishlist_get_count')) { Tygh::$app['view']->assign(array( 'wishlist_count' => fn_wishlist_get_count() )); } Tygh::$app['view']->assign(array( 'user_data' => $user_data, 'user_name' => $user_name )); } 